# å®è·µç»ƒä¹ 

<CourseFloatingBanner classNames="absolute z-10 right-0 top-0"
notebooks={[
  {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/deep-rl-class/blob/main/notebooks/unit5/unit5.ipynb"}
  ]}
  askForHelpUrl="http://hf.co/join/discord" />


æˆ‘ä»¬å·²ç»å­¦ä¹ äº†ML-Agentsæ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¦‚ä½•å·¥ä½œã€‚æˆ‘ä»¬è¿˜ç ”ç©¶äº†å°†è¦ä½¿ç”¨çš„ä¸¤ä¸ªç¯å¢ƒã€‚ç°åœ¨æˆ‘ä»¬å‡†å¤‡è®­ç»ƒæˆ‘ä»¬çš„æ™ºèƒ½ä½“äº†ï¼

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/envs.png" alt="Environments" />

ä¸ºäº†åœ¨è®¤è¯è¿‡ç¨‹ä¸­éªŒè¯è¿™ä¸ªå®è·µç»ƒä¹ ï¼Œä½ **åªéœ€è¦å°†è®­ç»ƒå¥½çš„æ¨¡å‹æ¨é€åˆ°Hub**ã€‚
ä¸ºäº†éªŒè¯è¿™ä¸ªå®è·µç»ƒä¹ ï¼Œ**æ²¡æœ‰éœ€è¦è¾¾åˆ°çš„æœ€ä½ç»“æœ**ã€‚ä½†å¦‚æœä½ æƒ³è·å¾—ä¸é”™çš„ç»“æœï¼Œå¯ä»¥å°è¯•è¾¾åˆ°ä»¥ä¸‹ç›®æ ‡ï¼š

- å¯¹äº[é‡‘å­—å¡”ç¯å¢ƒ](https://huggingface.co/spaces/unity/ML-Agents-Pyramids)ï¼šå¹³å‡å¥–åŠ± = 1.75
- å¯¹äº[é›ªçƒç›®æ ‡ç¯å¢ƒ](https://huggingface.co/spaces/ThomasSimonini/ML-Agents-SnowballTarget)ï¼šå¹³å‡å¥–åŠ± = 15 æˆ–åœ¨ä¸€ä¸ªå›åˆä¸­å‡»ä¸­30ä¸ªç›®æ ‡ã€‚

æœ‰å…³è®¤è¯è¿‡ç¨‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æ­¤éƒ¨åˆ† ğŸ‘‰ https://huggingface.co/deep-rl-course/en/unit0/introduction#certification-process

**è¦å¼€å§‹å®è·µç»ƒä¹ ï¼Œè¯·ç‚¹å‡»"åœ¨Colabä¸­æ‰“å¼€"æŒ‰é’®** ğŸ‘‡ï¼š

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/huggingface/deep-rl-class/blob/master/notebooks/unit5/unit5.ipynb)

æˆ‘ä»¬å¼ºçƒˆ**å»ºè®®å­¦ç”Ÿä½¿ç”¨Google Colabè¿›è¡Œå®è·µç»ƒä¹ **ï¼Œè€Œä¸æ˜¯åœ¨ä¸ªäººç”µè„‘ä¸Šè¿è¡Œå®ƒä»¬ã€‚

é€šè¿‡ä½¿ç”¨Google Colabï¼Œ**ä½ å¯ä»¥ä¸“æ³¨äºå­¦ä¹ å’Œå®éªŒï¼Œè€Œä¸å¿…æ‹…å¿ƒ**è®¾ç½®ç¯å¢ƒçš„æŠ€æœ¯æ–¹é¢ã€‚

# ç¬¬5å•å…ƒï¼šML-Agentså…¥é—¨

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/thumbnail.png" alt="Thumbnail"/>

åœ¨è¿™ä¸ªç¬”è®°æœ¬ä¸­ï¼Œä½ å°†äº†è§£ML-Agentså¹¶è®­ç»ƒä¸¤ä¸ªæ™ºèƒ½ä½“ã€‚

- ç¬¬ä¸€ä¸ªæ™ºèƒ½ä½“å°†å­¦ä¹ **å‘å‡ºç°çš„ç›®æ ‡å‘å°„é›ªçƒ**ã€‚
- ç¬¬äºŒä¸ªæ™ºèƒ½ä½“éœ€è¦æŒ‰ä¸‹æŒ‰é’®ç”Ÿæˆä¸€ä¸ªé‡‘å­—å¡”ï¼Œç„¶åå¯¼èˆªåˆ°é‡‘å­—å¡”ï¼Œå°†å…¶æ¨å€’ï¼Œ**å¹¶ç§»åŠ¨åˆ°é¡¶éƒ¨çš„é‡‘ç –**ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒéœ€è¦æ¢ç´¢ç¯å¢ƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ç§ç§°ä¸ºå¥½å¥‡å¿ƒçš„æŠ€æœ¯ã€‚

ä¹‹åï¼Œä½ å°†èƒ½å¤Ÿ**ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è§‚çœ‹ä½ çš„æ™ºèƒ½ä½“ç©æ¸¸æˆ**ã€‚

æœ‰å…³è®¤è¯è¿‡ç¨‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æ­¤éƒ¨åˆ† ğŸ‘‰ https://huggingface.co/deep-rl-course/en/unit0/introduction#certification-process

â¬‡ï¸ è¿™é‡Œæ˜¯**ä½ åœ¨æœ¬å•å…ƒç»“æŸæ—¶å°†å®ç°çš„å†…å®¹**çš„ç¤ºä¾‹ã€‚ â¬‡ï¸

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/pyramids.gif" alt="Pyramids"/>

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/snowballtarget.gif" alt="SnowballTarget"/>

### ğŸ® ç¯å¢ƒï¼š

- [é‡‘å­—å¡”](https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Learning-Environment-Examples.md#pyramids)
- é›ªçƒç›®æ ‡

### ğŸ“š RLåº“ï¼š

- [ML-Agents](https://github.com/Unity-Technologies/ml-agents)

æˆ‘ä»¬ä¸€ç›´åœ¨åŠªåŠ›æ”¹è¿›æˆ‘ä»¬çš„æ•™ç¨‹ï¼Œæ‰€ä»¥**å¦‚æœä½ åœ¨è¿™ä¸ªç¬”è®°æœ¬ä¸­å‘ç°ä¸€äº›é—®é¢˜**ï¼Œè¯·[åœ¨GitHubä»“åº“ä¸Šæå‡ºissue](https://github.com/huggingface/deep-rl-class/issues)ã€‚

## æœ¬ç¬”è®°æœ¬çš„ç›®æ ‡ ğŸ†

åœ¨å®Œæˆæœ¬ç¬”è®°æœ¬åï¼Œä½ å°†ï¼š

- ç†è§£**ML-Agents**å¦‚ä½•å·¥ä½œä»¥åŠç¯å¢ƒåº“ã€‚
- èƒ½å¤Ÿ**åœ¨Unityç¯å¢ƒä¸­è®­ç»ƒæ™ºèƒ½ä½“**ã€‚

## å…ˆå†³æ¡ä»¶ ğŸ—ï¸
åœ¨æ·±å…¥å­¦ä¹ æœ¬ç¬”è®°æœ¬ä¹‹å‰ï¼Œä½ éœ€è¦ï¼š

ğŸ”² ğŸ“š **é€šè¿‡[é˜…è¯»ç¬¬5å•å…ƒäº†è§£ML-Agentsæ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¦‚ä½•å·¥ä½œ](https://huggingface.co/deep-rl-course/unit5/introduction)**  ğŸ¤—

# è®©æˆ‘ä»¬è®­ç»ƒæˆ‘ä»¬çš„æ™ºèƒ½ä½“ ğŸš€

## è®¾ç½®GPU ğŸ’ª

- ä¸ºäº†**åŠ é€Ÿæ™ºèƒ½ä½“çš„è®­ç»ƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨GPU**ã€‚ä¸ºæ­¤ï¼Œè¯·è½¬åˆ°`Runtime > Change Runtime type`

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/notebooks/gpu-step1.jpg" alt="GPU Step 1" />

- `Hardware Accelerator > GPU`

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/notebooks/gpu-step2.jpg" alt="GPU Step 2" />

## å…‹éš†ä»“åº“ ğŸ”½

- æˆ‘ä»¬éœ€è¦å…‹éš†åŒ…å«**ML-Agents**çš„ä»“åº“ã€‚

```bash
# å…‹éš†ä»“åº“ï¼ˆå¯èƒ½éœ€è¦3åˆ†é’Ÿï¼‰
git clone --depth 1 https://github.com/Unity-Technologies/ml-agents
```

## è®¾ç½®è™šæ‹Ÿç¯å¢ƒ ğŸ”½

- ä¸ºäº†è®©**ML-Agents**åœ¨Colabä¸­æˆåŠŸè¿è¡Œï¼ŒColabçš„Pythonç‰ˆæœ¬å¿…é¡»æ»¡è¶³åº“çš„Pythonè¦æ±‚ã€‚

- æˆ‘ä»¬å¯ä»¥åœ¨`setup.py`æ–‡ä»¶çš„`python_requires`å‚æ•°ä¸‹æ£€æŸ¥æ”¯æŒçš„Pythonç‰ˆæœ¬ã€‚è¿™äº›æ–‡ä»¶æ˜¯è®¾ç½®**ML-Agents**åº“æ‰€å¿…éœ€çš„ï¼Œå¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ï¼š
  - `/content/ml-agents/ml-agents/setup.py`
  - `/content/ml-agents/ml-agents-envs/setup.py`

- Colabå½“å‰çš„Pythonç‰ˆæœ¬ï¼ˆå¯ä»¥ä½¿ç”¨`!python --version`æ£€æŸ¥ï¼‰ä¸åº“çš„`python_requires`å‚æ•°ä¸åŒ¹é…ï¼Œå› æ­¤å®‰è£…å¯èƒ½ä¼šæ‚„æ— å£°æ¯åœ°å¤±è´¥ï¼Œå¹¶åœ¨ç¨åæ‰§è¡Œç›¸åŒå‘½ä»¤æ—¶å¯¼è‡´å¦‚ä¸‹é”™è¯¯ï¼š
  - `/bin/bash: line 1: mlagents-learn: command not found`
  - `/bin/bash: line 1: mlagents-push-to-hf: command not found`

- ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä¸**ML-Agents**åº“å…¼å®¹çš„Pythonç‰ˆæœ¬çš„è™šæ‹Ÿç¯å¢ƒã€‚

`æ³¨æ„ï¼š` *ä¸ºäº†æœªæ¥çš„å…¼å®¹æ€§ï¼Œå¦‚æœColabçš„Pythonç‰ˆæœ¬ä¸å…¼å®¹ï¼Œè¯·å§‹ç»ˆæ£€æŸ¥å®‰è£…æ–‡ä»¶ä¸­çš„`python_requires`å‚æ•°ï¼Œå¹¶åœ¨ä¸‹é¢çš„è„šæœ¬ä¸­å°†è™šæ‹Ÿç¯å¢ƒè®¾ç½®ä¸ºæ”¯æŒçš„æœ€é«˜Pythonç‰ˆæœ¬*

```bash
# Colabå½“å‰çš„Pythonç‰ˆæœ¬ï¼ˆä¸ML-Agentsä¸å…¼å®¹ï¼‰
!python --version
```

```bash
# å®‰è£…virtualenvå¹¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
!pip install virtualenv
!virtualenv myenv

# ä¸‹è½½å¹¶å®‰è£…Miniconda
!wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
!chmod +x Miniconda3-latest-Linux-x86_64.sh
!./Miniconda3-latest-Linux-x86_64.sh -b -f -p /usr/local

# æ¿€æ´»Minicondaå¹¶å®‰è£…Python 3.10.12ç‰ˆæœ¬
!source /usr/local/bin/activate
!conda install -q -y --prefix /usr/local python=3.10.12 ujson  # åœ¨è¿™é‡ŒæŒ‡å®šç‰ˆæœ¬

# è®¾ç½®Pythonå’Œcondaè·¯å¾„çš„ç¯å¢ƒå˜é‡
!export PYTHONPATH=/usr/local/lib/python3.10/site-packages/
!export CONDA_PREFIX=/usr/local/envs/myenv
```

```bash
# æ–°è™šæ‹Ÿç¯å¢ƒä¸­çš„Pythonç‰ˆæœ¬ï¼ˆä¸ML-Agentså…¼å®¹ï¼‰
!python --version
```

## å®‰è£…ä¾èµ–é¡¹ ğŸ”½

```bash
# è¿›å…¥ä»“åº“å¹¶å®‰è£…åŒ…ï¼ˆå¯èƒ½éœ€è¦3åˆ†é’Ÿï¼‰
%cd ml-agents
pip3 install -e ./ml-agents-envs
pip3 install -e ./ml-agents
```

## é›ªçƒç›®æ ‡ â›„

å¦‚æœä½ éœ€è¦å¤ä¹ è¿™ä¸ªç¯å¢ƒå¦‚ä½•å·¥ä½œï¼Œè¯·æŸ¥çœ‹æ­¤éƒ¨åˆ† ğŸ‘‰
https://huggingface.co/deep-rl-course/unit5/snowball-target

### ä¸‹è½½å¹¶å°†ç¯å¢ƒzipæ–‡ä»¶ç§»åŠ¨åˆ°`./training-envs-executables/linux/`

- æˆ‘ä»¬çš„ç¯å¢ƒå¯æ‰§è¡Œæ–‡ä»¶åœ¨ä¸€ä¸ªzipæ–‡ä»¶ä¸­ã€‚
- æˆ‘ä»¬éœ€è¦ä¸‹è½½å®ƒå¹¶å°†å…¶æ”¾ç½®åˆ°`./training-envs-executables/linux/`
- æˆ‘ä»¬ä½¿ç”¨linuxå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨colabï¼Œè€Œcolabæœºå™¨çš„æ“ä½œç³»ç»Ÿæ˜¯Ubuntuï¼ˆlinuxï¼‰

```bash
# åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºtraining-envs-executableså’Œlinuxç›®å½•
mkdir ./training-envs-executables
mkdir ./training-envs-executables/linux
```

æˆ‘ä»¬ä½¿ç”¨`wget`ä»https://github.com/huggingface/Snowball-Targetä¸‹è½½SnowballTarget.zipæ–‡ä»¶

```bash
wget "https://github.com/huggingface/Snowball-Target/raw/main/SnowballTarget.zip" -O ./training-envs-executables/linux/SnowballTarget.zip
```

æˆ‘ä»¬è§£å‹å¯æ‰§è¡Œæ–‡ä»¶.zipæ–‡ä»¶

```bash
unzip -d ./training-envs-executables/linux/ ./training-envs-executables/linux/SnowballTarget.zip
```

ç¡®ä¿ä½ çš„æ–‡ä»¶å¯è®¿é—®

```bash
chmod -R 755 ./training-envs-executables/linux/SnowballTarget
```

### å®šä¹‰é›ªçƒç›®æ ‡é…ç½®æ–‡ä»¶
- åœ¨ML-Agentsä¸­ï¼Œä½ åœ¨config.yamlæ–‡ä»¶ä¸­**å®šä¹‰è®­ç»ƒè¶…å‚æ•°**ã€‚

æœ‰å¤šä¸ªè¶…å‚æ•°ã€‚è¦æ›´å¥½åœ°ç†è§£å®ƒä»¬ï¼Œä½ åº”è¯¥é˜…è¯»[æ–‡æ¡£](https://github.com/Unity-Technologies/ml-agents/blob/release_20_docs/docs/Training-Configuration-File.md)ä¸­å¯¹æ¯ä¸ªè¶…å‚æ•°çš„è§£é‡Š


ä½ éœ€è¦åœ¨./content/ml-agents/config/ppo/ä¸­åˆ›å»ºä¸€ä¸ª`SnowballTarget.yaml`é…ç½®æ–‡ä»¶

æˆ‘ä»¬å°†ç»™ä½ ä¸€ä¸ªåˆæ­¥ç‰ˆæœ¬çš„é…ç½®ï¼ˆå¤åˆ¶å¹¶ç²˜è´´åˆ°ä½ çš„`SnowballTarget.yamlæ–‡ä»¶`ä¸­ï¼‰ï¼Œ**ä½†ä½ åº”è¯¥ä¿®æ”¹å®ƒ**ã€‚

```yaml
behaviors:
  SnowballTarget:
    trainer_type: ppo
    summary_freq: 10000
    keep_checkpoints: 10
    checkpoint_interval: 50000
    max_steps: 200000
    time_horizon: 64
    threaded: true
    hyperparameters:
      learning_rate: 0.0003
      learning_rate_schedule: linear
      batch_size: 128
      buffer_size: 2048
      beta: 0.005
      epsilon: 0.2
      lambd: 0.95
      num_epoch: 3
    network_settings:
      normalize: false
      hidden_units: 256
      num_layers: 2
      vis_encode_type: simple
    reward_signals:
      extrinsic:
        gamma: 0.99
        strength: 1.0
```

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/snowballfight_config1.png" alt="Config SnowballTarget"/>
<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/snowballfight_config2.png" alt="Config SnowballTarget"/>

ä½œä¸ºå®éªŒï¼Œå°è¯•ä¿®æ”¹ä¸€äº›å…¶ä»–è¶…å‚æ•°ã€‚Unityæä¾›äº†éå¸¸[å¥½çš„æ–‡æ¡£ï¼Œåœ¨è¿™é‡Œè§£é‡Šæ¯ä¸ªè¶…å‚æ•°](https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Training-Configuration-File.md)ã€‚

ç°åœ¨ä½ å·²ç»åˆ›å»ºäº†é…ç½®æ–‡ä»¶å¹¶ç†è§£äº†å¤§å¤šæ•°è¶…å‚æ•°çš„ä½œç”¨ï¼Œæˆ‘ä»¬å‡†å¤‡è®­ç»ƒæˆ‘ä»¬çš„æ™ºèƒ½ä½“äº† ğŸ”¥ã€‚

### è®­ç»ƒæ™ºèƒ½ä½“

è¦è®­ç»ƒæˆ‘ä»¬çš„æ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬éœ€è¦**å¯åŠ¨mlagents-learnå¹¶é€‰æ‹©åŒ…å«ç¯å¢ƒçš„å¯æ‰§è¡Œæ–‡ä»¶**ã€‚

æˆ‘ä»¬å®šä¹‰å››ä¸ªå‚æ•°ï¼š

1. `mlagents-learn <config>`ï¼šè¶…å‚æ•°é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚
2. `--env`ï¼šç¯å¢ƒå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚
3. `--run_id`ï¼šä½ æƒ³ç»™è®­ç»ƒè¿è¡ŒIDèµ·çš„åç§°ã€‚
4. `--no-graphics`ï¼šåœ¨è®­ç»ƒæœŸé—´ä¸å¯åŠ¨å¯è§†åŒ–ã€‚

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/mlagentslearn.png" alt="MlAgents learn"/>

è®­ç»ƒæ¨¡å‹å¹¶ä½¿ç”¨`--resume`æ ‡å¿—åœ¨ä¸­æ–­çš„æƒ…å†µä¸‹ç»§ç»­è®­ç»ƒã€‚

> å¦‚æœä½ ä½¿ç”¨`--resume`ï¼Œç¬¬ä¸€æ¬¡å¯èƒ½ä¼šå¤±è´¥ã€‚å°è¯•é‡æ–°è¿è¡Œä»£ç å—ä»¥ç»•è¿‡é”™è¯¯ã€‚

è®­ç»ƒå°†æ ¹æ®ä½ çš„é…ç½®éœ€è¦10åˆ°35åˆ†é’Ÿã€‚å»å–æ¯â˜•ï¸ï¼Œä½ å€¼å¾—æ‹¥æœ‰ ğŸ¤—ã€‚

```bash
mlagents-learn ./config/ppo/SnowballTarget.yaml --env=./training-envs-executables/linux/SnowballTarget/SnowballTarget --run-id="SnowballTarget1" --no-graphics
```

### å°†æ™ºèƒ½ä½“æ¨é€åˆ°Hugging Face Hub

- ç°åœ¨æˆ‘ä»¬å·²ç»è®­ç»ƒäº†æˆ‘ä»¬çš„æ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬**å‡†å¤‡å°†å®ƒæ¨é€åˆ°Hubå¹¶åœ¨æµè§ˆå™¨ä¸Šè§‚çœ‹å®ƒçš„è¡¨ç°ğŸ”¥ã€‚**

ä¸ºäº†èƒ½å¤Ÿä¸ç¤¾åŒºåˆ†äº«ä½ çš„æ¨¡å‹ï¼Œè¿˜æœ‰ä¸‰ä¸ªæ­¥éª¤éœ€è¦éµå¾ªï¼š

1ï¸âƒ£ ï¼ˆå¦‚æœä½ è¿˜æ²¡æœ‰å®Œæˆï¼‰åˆ›å»ºä¸€ä¸ªHFè´¦æˆ· â¡ https://huggingface.co/join

2ï¸âƒ£ ç™»å½•å¹¶ä»Hugging Faceç½‘ç«™å­˜å‚¨ä½ çš„è®¤è¯ä»¤ç‰Œã€‚
- åˆ›å»ºä¸€ä¸ªæ–°ä»¤ç‰Œï¼ˆhttps://huggingface.co/settings/tokensï¼‰**å…·æœ‰å†™å…¥æƒé™**

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/notebooks/create-token.jpg" alt="Create HF Token" />

- å¤åˆ¶ä»¤ç‰Œ
- è¿è¡Œä¸‹é¢çš„å•å…ƒæ ¼å¹¶ç²˜è´´ä»¤ç‰Œ

```python
from huggingface_hub import notebook_login

notebook_login()
```

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨Google Colabæˆ–Jupyter Notebookï¼Œä½ éœ€è¦ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼š`huggingface-cli login`

ç„¶åæˆ‘ä»¬éœ€è¦è¿è¡Œ`mlagents-push-to-hf`ã€‚

æˆ‘ä»¬å®šä¹‰å››ä¸ªå‚æ•°ï¼š

1. `--run-id`ï¼šè®­ç»ƒè¿è¡ŒIDçš„åç§°ã€‚
2. `--local-dir`ï¼šæ™ºèƒ½ä½“ä¿å­˜çš„ä½ç½®ï¼Œå®ƒæ˜¯results/`run_idåç§°`ï¼Œæ‰€ä»¥åœ¨æˆ‘çš„ä¾‹å­ä¸­æ˜¯results/First Trainingã€‚
3. `--repo-id`ï¼šä½ æƒ³åˆ›å»ºæˆ–æ›´æ–°çš„Hugging Faceä»“åº“çš„åç§°ã€‚å®ƒæ€»æ˜¯`ä½ çš„huggingfaceç”¨æˆ·å/ä»“åº“åç§°`
å¦‚æœä»“åº“ä¸å­˜åœ¨ï¼Œ**å®ƒå°†è‡ªåŠ¨åˆ›å»º**ã€‚
4. `--commit-message`ï¼šç”±äºHFä»“åº“æ˜¯gitä»“åº“ï¼Œä½ éœ€è¦æä¾›ä¸€ä¸ªæäº¤æ¶ˆæ¯ã€‚

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/mlagentspushtohub.png" alt="Push to Hub"/>

ä¾‹å¦‚ï¼š

`mlagents-push-to-hf  --run-id="SnowballTarget1" --local-dir="./results/SnowballTarget1" --repo-id="ThomasSimonini/ppo-SnowballTarget"  --commit-message="First Push"`

```python
mlagents-push-to-hf  --run-id= # æ·»åŠ ä½ çš„è¿è¡ŒID  --local-dir= # ä½ çš„æœ¬åœ°ç›®å½•  --repo-id= # ä½ çš„ä»“åº“ID  --commit-message= # ä½ çš„æäº¤æ¶ˆæ¯
```

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥åœ¨è¿‡ç¨‹ç»“æŸæ—¶çœ‹åˆ°è¿™ä¸ªï¼ˆä½†URLä¸åŒ ğŸ˜†ï¼‰ï¼š



```
Your model is pushed to the hub. You can view your model here: https://huggingface.co/ThomasSimonini/ppo-SnowballTarget
```

è¿™æ˜¯ä½ æ¨¡å‹çš„é“¾æ¥ã€‚å®ƒåŒ…å«ä¸€ä¸ªæ¨¡å‹å¡ç‰‡ï¼Œè§£é‡Šå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä½ çš„Tensorboardå’Œä½ çš„é…ç½®æ–‡ä»¶ã€‚**æœ€æ£’çš„æ˜¯å®ƒæ˜¯ä¸€ä¸ªgitä»“åº“ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥æœ‰ä¸åŒçš„æäº¤ï¼Œé€šè¿‡æ–°çš„æ¨é€æ›´æ–°ä½ çš„ä»“åº“ç­‰ã€‚**

ä½†ç°åœ¨æ˜¯æœ€å¥½çš„éƒ¨åˆ†ï¼š**èƒ½å¤Ÿåœ¨çº¿è§‚çœ‹ä½ çš„æ™ºèƒ½ä½“ ğŸ‘€ã€‚**

### è§‚çœ‹ä½ çš„æ™ºèƒ½ä½“ç©æ¸¸æˆ ğŸ‘€

è¿™ä¸€æ­¥å¾ˆç®€å•ï¼š

1. å‰å¾€ï¼šhttps://huggingface.co/spaces/ThomasSimonini/ML-Agents-SnowballTarget

2. å¯åŠ¨æ¸¸æˆå¹¶é€šè¿‡ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®å°†å…¶å…¨å±æ˜¾ç¤º

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/snowballtarget_load.png" alt="Snowballtarget load"/>

1. åœ¨æ­¥éª¤1ä¸­ï¼Œè¾“å…¥ä½ çš„ç”¨æˆ·åï¼ˆä½ çš„ç”¨æˆ·ååŒºåˆ†å¤§å°å†™ï¼šä¾‹å¦‚ï¼Œæˆ‘çš„ç”¨æˆ·åæ˜¯ThomasSimoniniè€Œä¸æ˜¯thomassimoniniæˆ–ThOmasImoNInIï¼‰å¹¶ç‚¹å‡»æœç´¢æŒ‰é’®ã€‚

2. åœ¨æ­¥éª¤2ä¸­ï¼Œé€‰æ‹©ä½ çš„æ¨¡å‹ä»“åº“ã€‚

3. åœ¨æ­¥éª¤3ä¸­ï¼Œ**é€‰æ‹©ä½ æƒ³è¦å›æ”¾çš„æ¨¡å‹**ï¼š
  - æˆ‘æœ‰å¤šä¸ªæ¨¡å‹ï¼Œå› ä¸ºæˆ‘ä»¬æ¯500000ä¸ªæ—¶é—´æ­¥ä¿å­˜ä¸€ä¸ªæ¨¡å‹ã€‚
  - ä½†ç”±äºæˆ‘æƒ³è¦æœ€æ–°çš„ä¸€ä¸ªï¼Œæˆ‘é€‰æ‹©`SnowballTarget.onnx`

ğŸ‘‰ **å°è¯•ä¸åŒçš„æ¨¡å‹æ­¥éª¤æ¥æŸ¥çœ‹æ™ºèƒ½ä½“çš„æ”¹è¿›æƒ…å†µ**æ˜¯å¾ˆå¥½çš„ã€‚


ä¸è¦çŠ¹è±«ï¼Œåœ¨discordçš„#rl-i-made-thisé¢‘é“åˆ†äº«ä½ çš„æ™ºèƒ½ä½“è·å¾—çš„æœ€ä½³åˆ†æ•° ğŸ”¥

ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä¸€ä¸ªæ›´å…·æŒ‘æˆ˜æ€§çš„ç¯å¢ƒï¼Œç§°ä¸ºé‡‘å­—å¡”ã€‚

## é‡‘å­—å¡” ğŸ†

### ä¸‹è½½å¹¶å°†ç¯å¢ƒzipæ–‡ä»¶ç§»åŠ¨åˆ°`./training-envs-executables/linux/`
- æˆ‘ä»¬çš„ç¯å¢ƒå¯æ‰§è¡Œæ–‡ä»¶åœ¨ä¸€ä¸ªzipæ–‡ä»¶ä¸­ã€‚
- æˆ‘ä»¬éœ€è¦ä¸‹è½½å®ƒå¹¶å°†å…¶æ”¾ç½®åˆ°`./training-envs-executables/linux/`
- æˆ‘ä»¬ä½¿ç”¨linuxå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨colabï¼Œè€Œcolabæœºå™¨çš„æ“ä½œç³»ç»Ÿæ˜¯Ubuntuï¼ˆlinuxï¼‰

æˆ‘ä»¬ä½¿ç”¨`wget`ä»https://huggingface.co/spaces/unity/ML-Agents-Pyramids/resolve/main/Pyramids.zipä¸‹è½½Pyramids.zipæ–‡ä»¶

```python
wget "https://huggingface.co/spaces/unity/ML-Agents-Pyramids/resolve/main/Pyramids.zip" -O ./training-envs-executables/linux/Pyramids.zip
```

è§£å‹å®ƒ

```python
unzip -d ./training-envs-executables/linux/ ./training-envs-executables/linux/Pyramids.zip
```

ç¡®ä¿ä½ çš„æ–‡ä»¶å¯è®¿é—®

```bash
chmod -R 755 ./training-envs-executables/linux/Pyramids/Pyramids
```

### ä¿®æ”¹PyramidsRNDé…ç½®æ–‡ä»¶
  
- ä¸ç¬¬ä¸€ä¸ªç¯å¢ƒä¸åŒï¼Œç¬¬ä¸€ä¸ªæ˜¯è‡ªå®šä¹‰çš„ï¼Œ**é‡‘å­—å¡”æ˜¯ç”±Unityå›¢é˜Ÿåˆ¶ä½œçš„**ã€‚
- æ‰€ä»¥PyramidsRNDé…ç½®æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä½äº./content/ml-agents/config/ppo/PyramidsRND.yaml
- ä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆPyramidsRNDä¸­æœ‰"RND"ã€‚RNDä»£è¡¨*éšæœºç½‘ç»œè’¸é¦ï¼ˆrandom network distillationï¼‰*ï¼Œè¿™æ˜¯ä¸€ç§ç”Ÿæˆå¥½å¥‡å¿ƒå¥–åŠ±çš„æ–¹æ³•ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºè¿™ç§æŠ€æœ¯çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å†™äº†ä¸€ç¯‡æ–‡ç« è§£é‡Šè¿™ç§æŠ€æœ¯ï¼šhttps://medium.com/data-from-the-trenches/curiosity-driven-learning-through-random-network-distillation-488ffd8e5938

å¯¹äºè¿™æ¬¡è®­ç»ƒï¼Œæˆ‘ä»¬å°†ä¿®æ”¹ä¸€ä»¶äº‹ï¼š
- æ€»è®­ç»ƒæ­¥æ•°è¶…å‚æ•°å¤ªé«˜ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦1Mè®­ç»ƒæ­¥æ•°å°±èƒ½è¾¾åˆ°åŸºå‡†ï¼ˆå¹³å‡å¥–åŠ± = 1.75ï¼‰ã€‚
ğŸ‘‰ ä¸ºæ­¤ï¼Œæˆ‘ä»¬è½¬åˆ°config/ppo/PyramidsRND.yamlï¼Œ**å°†max_stepsæ›´æ”¹ä¸º1000000ã€‚**

<img src="https://huggingface.co/datasets/huggingface-deep-rl-course/course-images/resolve/main/en/unit7/pyramids-config.png" alt="Pyramids config"/>

ä½œä¸ºå®éªŒï¼Œä½ ä¹Ÿåº”è¯¥å°è¯•ä¿®æ”¹ä¸€äº›å…¶ä»–è¶…å‚æ•°ã€‚Unityæä¾›äº†éå¸¸[å¥½çš„æ–‡æ¡£ï¼Œåœ¨è¿™é‡Œè§£é‡Šæ¯ä¸ªè¶…å‚æ•°](https://github.com/Unity-Technologies/ml-agents/blob/main/docs/Training-Configuration-File.md)ã€‚

æˆ‘ä»¬ç°åœ¨å‡†å¤‡è®­ç»ƒæˆ‘ä»¬çš„æ™ºèƒ½ä½“ ğŸ”¥ã€‚

### è®­ç»ƒæ™ºèƒ½ä½“

æ ¹æ®ä½ çš„æœºå™¨ï¼Œè®­ç»ƒå°†éœ€è¦30åˆ°45åˆ†é’Ÿï¼Œå»å–æ¯â˜•ï¸ï¼Œä½ å€¼å¾—æ‹¥æœ‰ ğŸ¤—ã€‚

```python
mlagents-learn ./config/ppo/PyramidsRND.yaml --env=./training-envs-executables/linux/Pyramids/Pyramids --run-id="Pyramids Training" --no-graphics
```

### å°†æ™ºèƒ½ä½“æ¨é€åˆ°Hugging Face Hub

- ç°åœ¨æˆ‘ä»¬å·²ç»è®­ç»ƒäº†æˆ‘ä»¬çš„æ™ºèƒ½ä½“ï¼Œæˆ‘ä»¬**å‡†å¤‡å°†å®ƒæ¨é€åˆ°Hubï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸Šè§‚çœ‹å®ƒçš„è¡¨ç°ğŸ”¥ã€‚**

```python
mlagents-push-to-hf  --run-id= # æ·»åŠ ä½ çš„è¿è¡ŒID  --local-dir= # ä½ çš„æœ¬åœ°ç›®å½•  --repo-id= # ä½ çš„ä»“åº“ID  --commit-message= # ä½ çš„æäº¤æ¶ˆæ¯
```

### è§‚çœ‹ä½ çš„æ™ºèƒ½ä½“ç©æ¸¸æˆ ğŸ‘€

ğŸ‘‰ https://huggingface.co/spaces/unity/ML-Agents-Pyramids
  
### ğŸ å¥–åŠ±ï¼šä¸ºä»€ä¹ˆä¸åœ¨å¦ä¸€ä¸ªç¯å¢ƒä¸­è®­ç»ƒï¼Ÿ
  
ç°åœ¨ä½ çŸ¥é“å¦‚ä½•ä½¿ç”¨MLAgentsè®­ç»ƒæ™ºèƒ½ä½“ï¼Œ**ä¸ºä»€ä¹ˆä¸å°è¯•å¦ä¸€ä¸ªç¯å¢ƒå‘¢ï¼Ÿ**

MLAgentsæä¾›äº†17ä¸ªä¸åŒçš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€äº›è‡ªå®šä¹‰ç¯å¢ƒã€‚å­¦ä¹ çš„æœ€å¥½æ–¹å¼æ˜¯è‡ªå·±å°è¯•ï¼Œç©å¾—å¼€å¿ƒã€‚

![cover](https://miro.medium.com/max/1400/0*xERdThTRRM2k_U9f.png)

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ç›®å‰åœ¨Hugging Faceä¸Šå¯ç”¨ç¯å¢ƒçš„å®Œæ•´åˆ—è¡¨ ğŸ‘‰ https://github.com/huggingface/ml-agents#the-environments

ç”¨äºå¯è§†åŒ–ä½ çš„æ™ºèƒ½ä½“çš„æ¼”ç¤º ğŸ‘‰ https://huggingface.co/unity

ç›®å‰æˆ‘ä»¬å·²ç»é›†æˆäº†ï¼š
- [è •è™«](https://huggingface.co/spaces/unity/ML-Agents-Worm)æ¼”ç¤ºï¼Œä½ æ•™ä¸€æ¡**è •è™«çˆ¬è¡Œ**ã€‚
- [æ­¥è¡Œè€…](https://huggingface.co/spaces/unity/ML-Agents-Walker)æ¼”ç¤ºï¼Œä½ æ•™ä¸€ä¸ªæ™ºèƒ½ä½“**æœç€ç›®æ ‡è¡Œèµ°**ã€‚

ä»Šå¤©çš„å†…å®¹å°±åˆ°è¿™é‡Œã€‚æ­å–œä½ å®Œæˆæœ¬æ•™ç¨‹ï¼

å­¦ä¹ çš„æœ€å¥½æ–¹å¼æ˜¯å®è·µå’Œå°è¯•ã€‚ä¸ºä»€ä¹ˆä¸å°è¯•å¦ä¸€ä¸ªç¯å¢ƒå‘¢ï¼ŸML-Agentsæœ‰18ä¸ªä¸åŒçš„ç¯å¢ƒï¼Œä½†ä½ ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„ç¯å¢ƒã€‚æŸ¥çœ‹æ–‡æ¡£å¹¶ç©å¾—å¼€å¿ƒï¼

æˆ‘ä»¬åœ¨ç¬¬6å•å…ƒè§ ï¼Œ

## æŒç»­å­¦ä¹ ï¼Œä¿æŒç²¾å½© ğŸ¤—
